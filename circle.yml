machine:
  java:
    version: oraclejdk8

dependencies:
  pre:
    - git config --global user.email "shiketaudonko41@gmail.com"
    - git config --global user.name "kamatama41"
  override:
    - ./gradlew dependencies

test:
  override:
    - ./gradlew check --stacktrace

deployment:
  release:
    branch: release
    commands:
      - curl -f -u $RUBYGEMS_USER:$RUBYGEMS_PASSWORD https://rubygems.org/api/v1/api_key.yaml > ~/.gem/credentials; chmod 0600 ~/.gem/credentials
      - git checkout master
      - git reset --hard origin/master
      - ./gradlew release -Prelease.useAutomaticVersion=true
